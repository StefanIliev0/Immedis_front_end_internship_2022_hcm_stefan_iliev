"use strict";(self.webpackChunkcurrent_directory=self.webpackChunkcurrent_directory||[]).push([[623],{8623:(C,b,i)=>{i.r(b),i.d(b,{AuthModule:()=>S});var l=i(6814),f=i(1312),s=i(5861),g=i(7394),_=i(4423),e=i(6689),u=i(7715),m=i(3830),r=i(95),d=i(2490),v=i(8482);function y(n,c){1&n&&(e.TgZ(0,"p",12),e._uU(1," Email is required! "),e.qZA())}function M(n,c){1&n&&(e.TgZ(0,"p",12),e._uU(1," Email must be valid Email! "),e.qZA())}function P(n,c){if(1&n&&(e.ynx(0),e.YNc(1,y,2,0,"p",11),e.YNc(2,M,2,0,"p",11),e.BQk()),2&n){e.oxw();const a=e.MAs(8);e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(1),e.Q6J("ngIf",!(null==a.errors||!a.errors.email))}}function x(n,c){1&n&&(e.TgZ(0,"p",12),e._uU(1," Password is required! "),e.qZA())}function Z(n,c){1&n&&(e.TgZ(0,"p",12),e._uU(1," Password must be a least 4 characters! "),e.qZA())}function T(n,c){if(1&n&&(e.ynx(0),e.YNc(1,x,2,0,"p",11),e.YNc(2,Z,2,0,"p",11),e.BQk()),2&n){e.oxw();const a=e.MAs(13);e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(1),e.Q6J("ngIf",!(null==a.errors||!a.errors.minlength))}}let A=(()=>{var n;class c{constructor(o,t,p){this.service=o,this.store=t,this.router=p,this.subscr$=new g.w0}login(o){var t=this;return(0,s.Z)(function*(){o.invalid?t.service.addErr("Sorry , but something in your fields isn't right."):t.subscr$=t.service.loginUser(o.value.email,o.value.password).subscribe(p=>{const h=p.user;t.store.dispatch(_.X.add({user:h}));const{isHavePermisions:w,pathString:B,companyName:k}=t.service.generatePath(h.permissions);t.router.navigate(h.isNewEmpl?["auth/change_password"]:w?[B]:[`${k}/employee/${h._id}/information`])})})()}ngOnDestroy(){this.subscr$.unsubscribe()}}return(n=c).\u0275fac=function(o){return new(o||n)(e.Y36(u.e),e.Y36(m.yh),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:4,consts:[[1,"container"],[1,"login-form",3,"ngSubmit"],["form","ngForm"],["for","username"],["type","email","name","email","placeholder","Your email...","id","email","ngModel","","required","","email",""],["username","ngModel"],[4,"ngIf"],["for","password"],["type","password","name","password","id","password-register","placeholder","Your password...","ngModel","","required","","minlength","4"],["password","ngModel"],[3,"text","type","newEvent"],["class","error",4,"ngIf"],[1,"error"]],template:function(o,t){if(1&o){const p=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(p);const w=e.MAs(2);return e.KtG(t.login(w))}),e.TgZ(3,"h1"),e._uU(4,"Login"),e.qZA(),e.TgZ(5,"label",3),e._uU(6,"Email"),e.qZA(),e._UZ(7,"input",4,5),e.YNc(9,P,3,2,"ng-container",6),e.TgZ(10,"label",7),e._uU(11,"Password"),e.qZA(),e._UZ(12,"input",8,9),e.YNc(14,T,3,2,"ng-container",6),e._UZ(15,"app-err-message"),e.TgZ(16,"app-button",10),e.NdJ("newEvent",function(){e.CHM(p);const w=e.MAs(2);return e.KtG(t.login(w))}),e.qZA()()()}if(2&o){const p=e.MAs(8),h=e.MAs(13);e.xp6(9),e.Q6J("ngIf",p.touched),e.xp6(5),e.Q6J("ngIf",h.touched),e.xp6(2),e.Q6J("text","Login")("type","submit")}},dependencies:[l.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.wO,r.on,r.On,r.F,d.r,v.N],styles:[".login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;align-items:center;margin:3em auto;background:var(--distributed_gray);border-radius:1em;padding-block:3em;max-width:600px}input[_ngcontent-%COMP%]{border:none;border-radius:.5em;padding:.5em;width:22em;background:var(--distributed_blue)}label[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;font-style:italic}a[_ngcontent-%COMP%]{display:inline;font-weight:700}h1[_ngcontent-%COMP%]{color:var(--white);text-shadow:0 0 10px rgba(0,0,0,.8)}.error[_ngcontent-%COMP%]{font-size:1.2em;color:red}"]}),c})();var O=i(2171);function E(n,c){1&n&&(e.TgZ(0,"p",12),e._uU(1," Password and repeat password must be identical! "),e.qZA())}function J(n,c){1&n&&(e.TgZ(0,"p",12),e._uU(1," Password is required! "),e.qZA())}function N(n,c){1&n&&(e.TgZ(0,"p",12),e._uU(1," Password must be a least 4 characters! "),e.qZA())}function Y(n,c){if(1&n&&(e.ynx(0),e.YNc(1,E,2,0,"p",11),e.YNc(2,J,2,0,"p",11),e.YNc(3,N,2,0,"p",11),e.BQk()),2&n){e.oxw();const a=e.MAs(8),o=e.MAs(12);e.xp6(1),e.Q6J("ngIf",a.value!=o.value),e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(1),e.Q6J("ngIf",!(null==a.errors||!a.errors.minlength))}}let L=(()=>{var n;class c{constructor(o,t,p){this.service=o,this.store=t,this.router=p,this.subscr$=new g.w0,this.user$=new g.w0,this.companyName="",this.pathString="",this.userId="",this.isHavePermisions=!1}ngOnInit(){this.user$=this.store.select(O.d).subscribe(o=>{let t=o,{isHavePermisions:p,pathString:h,companyName:w}=this.service.generatePath(t.permissions);this.isHavePermisions=p,this.pathString=h,this.companyName=w,this.userId=t._id})}changePassword(o){var t=this;return(0,s.Z)(function*(){o.invalid?t.service.addErr("Sorry , but something in your fields isn't right."):t.subscr$=t.service.changePassword(t.userId,t.companyName,o.value.password).subscribe(p=>{t.router.navigate(t.isHavePermisions?[t.pathString]:[`${t.companyName}/profile/${t.userId}`])})})()}ngOnDestroy(){this.subscr$.unsubscribe(),this.user$.unsubscribe()}}return(n=c).\u0275fac=function(o){return new(o||n)(e.Y36(u.e),e.Y36(m.yh),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-password"]],decls:16,vars:3,consts:[[1,"container"],[1,"pass-form",3,"ngSubmit"],["form","ngForm"],["for","password"],["type","password","name","password","id","password","placeholder","Your new password...","ngModel","","required","","minlength","4"],["password","ngModel"],["for","repeatPassword"],["type","password","name","repeatPassword","id","repeatPassword","placeholder","Repeat your new password...","ngModel","","required","","minlength","4"],["repeatPassword","ngModel"],[4,"ngIf"],[3,"text","type","newEvent"],["class","error",4,"ngIf"],[1,"error"]],template:function(o,t){if(1&o){const p=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(p);const w=e.MAs(2);return e.KtG(t.changePassword(w))}),e.TgZ(3,"h1"),e._uU(4,"Change password"),e.qZA(),e.TgZ(5,"label",3),e._uU(6,"Password"),e.qZA(),e._UZ(7,"input",4,5),e.TgZ(9,"label",6),e._uU(10,"Repeat password"),e.qZA(),e._UZ(11,"input",7,8),e.YNc(13,Y,4,3,"ng-container",9),e._UZ(14,"app-err-message"),e.TgZ(15,"app-button",10),e.NdJ("newEvent",function(){e.CHM(p);const w=e.MAs(2);return e.KtG(t.changePassword(w))}),e.qZA()()()}if(2&o){const p=e.MAs(8);e.xp6(13),e.Q6J("ngIf",p.touched),e.xp6(2),e.Q6J("text","Change")("type","submit")}},dependencies:[l.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.wO,r.On,r.F,d.r,v.N],styles:[".pass-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;align-items:center;margin:3em auto;background:var(--distributed_gray);border-radius:1em;padding-block:3em;max-width:600px}input[_ngcontent-%COMP%]{border:none;border-radius:.5em;padding:.5em;width:22em;background:var(--distributed_blue)}label[_ngcontent-%COMP%]{font-size:1.8em;font-weight:700;font-style:italic}a[_ngcontent-%COMP%]{display:inline;font-weight:700}h1[_ngcontent-%COMP%]{color:var(--white);text-shadow:0 0 10px rgba(0,0,0,.8)}.error[_ngcontent-%COMP%]{font-size:1.2em;color:red}"]}),c})();var I=i(8469);const U=[{path:"",children:[{path:"login",component:A},{path:"change_password",component:L},{path:"logout",component:(()=>{var n;class c{constructor(o,t){this.store=o,this.router=t}ngOnInit(){this.store.dispatch(_.X.remove()),this.store.dispatch(I.s.remove()),this.router.navigate(["/"])}}return(n=c).\u0275fac=function(o){return new(o||n)(e.Y36(m.yh),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-logout"]],decls:0,vars:0,template:function(o,t){}}),c})()}]}];let Q=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(U),f.Bz]}),c})();var F=i(6208);let S=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[u.e],imports:[l.ez,Q,r.u5,F.m]}),c})()},2490:(C,b,i)=>{i.d(b,{r:()=>f});var l=i(6689);let f=(()=>{var s;class g{constructor(){this.newEvent=new l.vpe,this.disabled=!1}onClick(e){e.preventDefault(),e.stopPropagation(),this.newEvent.emit(),this.disabled=!0,setTimeout(()=>{this.disabled=!1},2e3)}}return(s=g).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=l.Xpm({type:s,selectors:[["app-button"]],inputs:{text:"text",type:"type",disabled:"disabled"},outputs:{newEvent:"newEvent"},decls:2,vars:3,consts:[[3,"disabled","type","click"]],template:function(e,u){1&e&&(l.TgZ(0,"button",0),l.NdJ("click",function(r){return u.onClick(r)}),l._uU(1),l.qZA()),2&e&&(l.Q6J("disabled",u.disabled)("type",u.type||"button"),l.xp6(1),l.Oqu(u.text))},styles:["button[_ngcontent-%COMP%]{padding:.5em;border-radius:.5em;background-color:var(--background-button);color:var(--white);border:3px solid var(--white);margin:0 auto;text-align:center;font-weight:700;width:9em;transition:color .3s ease-in-out,border-color .3s ease-in-out,background-color .3s ease-in-out;opacity:0;animation:_ngcontent-%COMP%_fade-in 1s ease-in-out forwards}button[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--background-button);background-color:var(--white);border-color:var(--background-button);transition:color .7s ease-in-out,background-color .5s ease-in-out,border-color .5s ease-in-out}button[_ngcontent-%COMP%]:disabled{background-color:gray}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}"]}),g})()},8482:(C,b,i)=>{i.d(b,{N:()=>e});var l=i(3830);const f=(0,l.ZF)("err");var s=i(6689),g=i(6814);function _(u,m){if(1&u&&(s.ynx(0),s.TgZ(1,"p",1),s._uU(2),s.ALo(3,"async"),s.qZA(),s.BQk()),2&u){const r=s.oxw();s.xp6(2),s.Oqu(s.lcZ(3,1,r.err))}}let e=(()=>{var u;class m{constructor(d){this.store=d,this.err=this.store.select(f)}}return(u=m).\u0275fac=function(d){return new(d||u)(s.Y36(l.yh))},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-err-message"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"error"]],template:function(d,v){1&d&&(s.YNc(0,_,4,3,"ng-container",0),s.ALo(1,"async")),2&d&&s.Q6J("ngIf",s.lcZ(1,1,v.err))},dependencies:[g.O5,g.Ov],styles:[".error[_ngcontent-%COMP%]{font-size:1.2em;color:red}"]}),m})()},5861:(C,b,i)=>{function l(s,g,_,e,u,m,r){try{var d=s[m](r),v=d.value}catch(y){return void _(y)}d.done?g(v):Promise.resolve(v).then(e,u)}function f(s){return function(){var g=this,_=arguments;return new Promise(function(e,u){var m=s.apply(g,_);function r(v){l(m,e,u,r,d,"next",v)}function d(v){l(m,e,u,r,d,"throw",v)}r(void 0)})}}i.d(b,{Z:()=>f})}}]);