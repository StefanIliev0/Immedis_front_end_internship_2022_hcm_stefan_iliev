"use strict";(self.webpackChunkcurrent_directory=self.webpackChunkcurrent_directory||[]).push([[26],{7666:(V,f,u)=>{u.r(f),u.d(f,{AdminModule:()=>Q});var g=u(6814),b=u(1312),w=u(7394),t=u(6689),T=u(1968);let x=(()=>{var o;class s{constructor(e,a){this.backEnd=e,this.router=a}nextRoute(e){let a=e.replaceAll(" ","");this.router.navigate([`${a}/dashboard`])}createCompany(e){return this.backEnd.post("company/create_company",e)}formatCompanyObj(e,a,l){return{name:a.name.toLowerCase().trim(),companyLevels:l,hierarhchy:a,rules:{remuneration:e.remuneration,workHours:e.WorkHours,paidAnnual:e.paidAnnual,taxesForEmp:{incomeTax:e.incomeTaxFromEml,SSC:e.socialSecurityContributionsEml,at:e.additionalTaxesEml},taxesForEmpr:{incomeTax:e.incomeTaxFromEmlr,SSC:e.socialSecurityContributionsEmlr,at:e.additionalTaxesEmlr},bonusesAsPercentages:[e.bonuses1,e.bonuses2,e.bonuses3],taxFreeBonusses:{coupons:e.coupons,child:e.child}},employees:[],contracts:[]}}addPositions(e,a,l,i,n){let m=Object.values(e),c=[];for(let h=0;h<m.length;h+=5){let _=[],M={title:m[h],permissions:[]},y=!1;l.forEach((G,C)=>{let d="";if(y)d="";else switch(C){case 0:d=i.name;break;case 1:d=i.sublevels[n[1]].name;break;case 2:d=i.sublevels[n[1]].sublevels[n[2]].name;break;case 3:d=i.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].name;break;case 4:d=i.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels[n[4]].name;break;case 5:d=i.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels[n[4]].sublevels[n[5]].name}let k={title:y?l[C]:d};G==l[a]&&(y=!0),k.can={read:!!y&&!!m[h+1],fill:!!y&&!!m[h+2],menage:!!y&&!!m[h+3],admin:!!m[h+4]},_.push(k)}),M.permissions=_,c.push(M)}switch(a){case 0:i.directEmplPositions=c;break;case 1:i.sublevels[n[1]].directEmplPositions=c;break;case 2:i.sublevels[n[1]].sublevels[n[2]].directEmplPositions=c;break;case 3:i.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].directEmplPositions=c;break;case 4:i.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels[n[4]].directEmplPositions=c;break;case 5:i.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels[n[4]].sublevels[n[5]].directEmplPositions=c}return i}getStrNames(e,a,l){let i=[];switch(e){case 0:i=a.name;break;case 1:i=a.sublevels?.map(n=>n.name);break;case 2:i=a.sublevels[l[1]].sublevels?.map(n=>n.name);break;case 3:i=a.sublevels[l[1]].sublevels[l[2]].sublevels?.map(n=>n.name);break;case 4:i=a.sublevels[l[1]].sublevels[l[2]].sublevels[l[3]].sublevels?.map(n=>n.name);break;case 5:i=a.sublevels[l[1]].sublevels[l[2]].sublevels[l[3]].sublevels[l[4]].sublevels?.map(n=>n.name);break;case 6:i=a.sublevels[l[1]].sublevels[l[2]].sublevels[l[3]].sublevels[l[4]].sublevels[l[5]].sublevels?.map(n=>n.name)}return i}addNamesToStruObj(e,a,l,i,n){let m=e.map(c=>({name:c,directEmplPositions:[]}));switch(a){case 0:l.sublevels=m,l.subLevelTitle=i[a+1];break;case 1:l.sublevels[n[1]].sublevels=m,l.sublevels[n[1]].subLevelTitle=i[a+1];break;case 2:l.sublevels[n[1]].sublevels[n[2]].sublevels=m,l.sublevels[n[1]].sublevels[n[2]].subLevelTitle=i[a+1];break;case 3:l.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels=m,l.sublevels[n[1]].sublevels[n[2]].subLevelTitle=i[a+1];break;case 4:l.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels[n[4]].sublevels=m,l.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].subLevelTitle=i[a+1];break;case 5:l.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels[n[4]].sublevels[n[5]].sublevels=m,l.sublevels[n[1]].sublevels[n[2]].sublevels[n[3]].sublevels[n[4]].subLevelTitle=i[a+1]}return l}generateFirstStructureFormModel(e,a,l,i,n,m){return[[{type:"header",label:`Appointed officers at the ${l[a]} ${a>0?i[n[a]]:m.name}`}],[{label:"Position",id:`level${e}`,type:"input",kind:"text",controlName:`position${e}`,placeholder:"Position of an employee...",value:"",validators:[{type:"required"},{type:"minLength",value:"2"}]},{label:"Can read data",id:`can-read${e}`,type:"checkbox",value:!1,controlName:`can-read${e}`},{label:"Can write data",id:`can-write${e}`,type:"checkbox",value:!1,controlName:`can-write${e}`},{label:"Can manage data",id:`can-manage${e}`,type:"checkbox",value:!1,controlName:`can-manage${e}`},{label:"Can administrate data",id:`can-admin${e}`,type:"checkbox",value:!1,controlName:`can-admin${e}`}],[{type:"button",label:"Add position"}]]}addName(e,a){return a.splice(a.length-1,0,[{label:"Name Of substructure",id:`name${e}`,type:"input",kind:"text",controlName:`name${e}`,placeholder:"name Of substructure here...",value:"",validators:[{type:"required"},{type:"minLength",value:"2"}]}]),a}generateSecondStructureFormModel(e,a,l){return[[{type:"header",label:`Names of the substructures of this ${l[a]}`}],[{label:"Name Of substructure",id:`name${e}`,type:"input",kind:"text",controlName:`name${e}`,placeholder:"name Of substructure here...",value:"",validators:[{type:"required"},{type:"minLength",value:"2"}]}],[{type:"button",label:"Add one more"}]]}addPosition(e,a){return a.splice(a.length-1,0,[{label:"Position",id:`level${e}`,type:"input",kind:"text",controlName:`position${e}`,placeholder:"Position of an employee...",value:"",validators:[{type:"required"},{type:"minLength",value:"2"}]},{label:"Can read data",id:`can-read${e}`,type:"checkbox",value:!1,controlName:`can-read${e}`},{label:"Can write data",id:`can-write${e}`,type:"checkbox",value:!1,controlName:`can-write${e}`},{label:"Can manage data",id:`can-manage${e}`,type:"checkbox",value:!1,controlName:`can-manage${e}`},{label:"Can administrate data",id:`can-admin${e}`,type:"checkbox",value:!1,controlName:`can-admin${e}`}]),a}generateCompLevelsStructure(e){let a=[];a[0]=[];for(let l=1;l<=Number(e.levels);l++)a[0].push({label:`${l} structure level name `,id:`${l} level`,type:"input",kind:"text",controlName:`${l}level`,placeholder:"name of company structure...",value:"",validators:[{type:"required"},{type:"minLength",value:"2"}]});return a[0].push({type:"button",label:"Next"}),a}generateAskForSubstruct(){return[[{label:" Does this structure have substructures?",id:"select",options:[{value:"no",label:"No"},{value:"yes",label:"Yes"}],type:"select",controlName:"askSub",value:"no"}]]}generateBasicCompanyInfoModel(){return[[{label:"Company name",id:"companyName",type:"input",kind:"text",controlName:"name",placeholder:"new company name...",value:"",validators:[{type:"required"},{type:"minLength",value:"2"}]},{label:"Max level of company structure",id:"levels",type:"input",kind:"number",controlName:"levels",placeholder:"number of company structures...",value:"1",validators:[{type:"max",value:"5"},{type:"min",value:"1"},{type:"required"}]},{type:"button",label:"Set"}]]}generateRuleFormModel(){return[[{type:"header",label:"Rules for entering data for reports."}],[{label:"Basis of remuneration ",id:"remuneration",options:[{value:"yearly",label:"Yearly"},{value:"monthly",label:"Monthly"},{value:"hourly",label:"Hourly"}],type:"select",controlName:"remuneration",value:"monthly"}],[{label:"Working hours per week.",id:"WorkHours",type:"input",kind:"number",controlName:"WorkHours",placeholder:"",value:"40",validators:[{type:"required"},{type:"min",value:"1"},{type:"max",value:"80"}]}],[{label:"Paid annual leave in days.",id:"paidAnnual",type:"input",kind:"number",controlName:"paidAnnual",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"1"},{type:"max",value:"300"}]}],[{type:"header",label:"Deductions by the employee."}],[{label:"Income Tax in percentages from the gross salary",id:"incomeTaxFromEml",type:"input",kind:"number",controlName:"incomeTaxFromEml",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{label:"Social Security Contributions in percentages from the gross salary",id:"socialSecurityContributionsEml",type:"input",kind:"number",controlName:"socialSecurityContributionsEml",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{label:"Additional Taxes in percentages from the gross salary",id:"additionalTaxesEml",type:"input",kind:"number",controlName:"additionalTaxesEml",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{type:"header",label:"Deductions by the employer."}],[{label:"Income Tax in percentages from the gross salary",id:"incomeTaxFromEmlr",type:"input",kind:"number",controlName:"incomeTaxFromEmlr",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{label:"Social Security Contributions in percentages from the gross salary",id:"socialSecurityContributionsEmlr",type:"input",kind:"number",controlName:"socialSecurityContributionsEmlr",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{label:"Additional Taxes in percentages from the gross salary",id:"additionalTaxesEmlr",type:"input",kind:"number",controlName:"additionalTaxesEmlr",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{type:"header",label:"Taxable allowances."}],[{label:"Usual bonuses as percentages of gross salary.",id:"bonuses1",type:"input",kind:"number",controlName:"bonuses1",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{label:"Usual bonuses as percentages of gross salary.",id:"bonuses2",type:"input",kind:"number",controlName:"bonuses2",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{label:"Usual bonuses as percentages of gross salary.",id:"bonuses3",type:"input",kind:"number",controlName:"bonuses3",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"},{type:"max",value:"99"}]}],[{type:"header",label:"Tax-free allowances."}],[{label:"Tax-free coupons per month as an amount in local currency",id:"coupons",type:"input",kind:"number",controlName:"coupons",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"}]}],[{label:"Child benefits per month as an amount in local currency for children",id:"child",type:"input",kind:"number",controlName:"child",placeholder:"",value:"0",validators:[{type:"required"},{type:"min",value:"0"}]}],[{label:"Finish",type:"button"}]]}}return(o=s).\u0275fac=function(e){return new(e||o)(t.LFG(T.M),t.LFG(b.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var N=u(2490),F=u(7149);function S(o,s){if(1&o){const r=t.EpF();t.ynx(0),t.TgZ(1,"app-dynamic-form",2),t.NdJ("getFormValue",function(a){t.CHM(r);const l=t.oxw();return t.KtG(l.basicCompanyInfo=a)})("onSubmit",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.onNext(1))}),t.qZA(),t.BQk()}if(2&o){const r=t.oxw();t.xp6(1),t.Q6J("fromModel",r.basicCompanyInfoModel)}}function A(o,s){if(1&o){const r=t.EpF();t.ynx(0),t.TgZ(1,"app-dynamic-form",2),t.NdJ("getFormValue",function(a){t.CHM(r);const l=t.oxw();return t.KtG(l.getSruct(a))})("onSubmit",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.onNext(2))}),t.qZA(),t.BQk()}if(2&o){const r=t.oxw();t.xp6(1),t.Q6J("fromModel",r.compStructureTitlesModel)}}function E(o,s){if(1&o){const r=t.EpF();t.ynx(0),t.TgZ(1,"app-dynamic-form",2),t.NdJ("getFormValue",function(a){t.CHM(r);const l=t.oxw();return t.KtG(l.getStruData(a))})("onSubmit",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.AddElement())}),t.qZA(),t.TgZ(2,"div",3)(3,"app-button",4),t.NdJ("newEvent",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.onNextProcess())}),t.qZA()(),t.BQk()}if(2&o){const r=t.oxw();t.xp6(1),t.Q6J("fromModel",r.formModel),t.xp6(2),t.Q6J("text","Next")}}function $(o,s){if(1&o){const r=t.EpF();t.ynx(0),t.TgZ(1,"app-dynamic-form",2),t.NdJ("getFormValue",function(a){t.CHM(r);const l=t.oxw();return t.KtG(l.getRuleData(a))})("onSubmit",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.SubmitData())}),t.qZA(),t.BQk()}if(2&o){const r=t.oxw();t.xp6(1),t.Q6J("fromModel",r.ruleFormModel)}}let O=(()=>{var o;class s{constructor(e){this.service=e,this.generalProcess=0,this.companyMaxLevel=0,this.companyLevel=0,this.process=0,this.subProcess=0,this.askForSubstr=0,this.subLevelProcess={0:0,max0:0,1:0,max1:0,2:0,max2:0,3:0,max3:0,4:0,max4:0,5:0,max5:0},this.basicCompanyInfo={},this.ruleModelObj={},this.structureModelObject={},this.askModelObj={},this.compStructureTitles=[],this.currentStruturesNames=[],this.basicCompanyInfoModel=this.service.generateBasicCompanyInfoModel(),this.ruleFormModel=this.service.generateRuleFormModel(),this.compStructureTitlesModel=[],this.formModel=[],this.CompStructureObject={},this.newCompany$=new w.w0}SubmitData(){let e=this.service.formatCompanyObj(this.ruleModelObj,this.CompStructureObject,this.compStructureTitles);this.newCompany$=this.service.createCompany(e).subscribe(a=>{this.service.nextRoute(this.basicCompanyInfo.name)})}onNextProcess(){if(0==this.process&&0==this.askForSubstr&&(this.CompStructureObject=this.service.addPositions(this.structureModelObject,this.companyLevel,this.compStructureTitles,this.CompStructureObject,this.subLevelProcess)),0==this.process&&0==this.askForSubstr&&this.companyLevel<this.companyMaxLevel-1)return this.subProcess=0,this.formModel=this.service.generateAskForSubstruct(),void(this.askForSubstr=1);if(0==this.process&&1==this.askForSubstr&&"yes"==this.askModelObj.askSub)return this.process=1,this.generateNextProcessForm(),void(this.askForSubstr=0);if(0==this.process&&1==this.askForSubstr&&"no"==this.askModelObj.askSub||0==this.process&&0==this.askForSubstr&&this.companyLevel==this.companyMaxLevel-1){if(this.subProcess=0,this.subLevelProcess[this.companyLevel]++,this.subLevelProcess[`max${this.companyLevel}`]<=this.subLevelProcess[this.companyLevel]&&this.companyLevel>=1)for(;this.subLevelProcess[`max${this.companyLevel}`]<=this.subLevelProcess[this.companyLevel];)if(this.subLevelProcess[`max${this.companyLevel}`]=0,this.subLevelProcess[this.companyLevel]=0,this.subLevelProcess[this.companyLevel-1]++,this.companyLevel--,0==this.companyLevel)return void this.onNext(3);return this.currentStruturesNames=this.service.getStrNames(this.companyLevel,this.CompStructureObject,this.subLevelProcess),this.askForSubstr=0,void this.generateNextProcessForm()}if(1==this.process&&this.companyLevel<this.companyMaxLevel){this.process=0,this.askModelObj.askSub="no";let e=Object.values(this.structureModelObject);return this.currentStruturesNames=e,this.CompStructureObject=this.service.addNamesToStruObj(e,this.companyLevel,this.CompStructureObject,this.compStructureTitles,this.subLevelProcess),this.companyLevel++,this.subLevelProcess[`max${this.companyLevel}`]=e.length,void(this.formModel=this.service.generateFirstStructureFormModel(this.subProcess,this.companyLevel,this.compStructureTitles,this.currentStruturesNames,this.subLevelProcess,this.basicCompanyInfo))}}AddElement(){return 0==this.process?(this.formModel=this.formModel?.map(e=>e.map(a=>{if(this.structureModelObject?.[a.controlName||""]){let l=this.structureModelObject[a.controlName||""];return{...a,value:l}}return a})),this.subProcess++,void(this.formModel=this.service.addPosition(this.subProcess,this.formModel))):1==this.process?(this.formModel=this.formModel?.map(e=>e.map(a=>{if(this.structureModelObject?.[a.controlName||""]){let l=this.structureModelObject[a.controlName||""];return{...a,value:l}}return a})),this.subProcess++,void(this.formModel=this.service.addName(this.subProcess,this.formModel))):void 0}generateNextProcessForm(){0!=this.process?1!=this.process||(this.formModel=this.service.generateSecondStructureFormModel(this.subProcess,this.companyLevel,this.compStructureTitles)):this.formModel=this.service.generateFirstStructureFormModel(this.subProcess,this.companyLevel,this.compStructureTitles,this.currentStruturesNames,this.subLevelProcess,this.basicCompanyInfo)}getStruData(e){1==this.askForSubstr?this.askModelObj=e:0==this.askForSubstr&&(this.structureModelObject=e)}getRuleData(e){this.ruleModelObj=e}getSruct(e){this.compStructureTitles=Object.values(e)}onNext(e){this.generalProcess=e,1==this.generalProcess&&(this.compStructureTitlesModel=this.service.generateCompLevelsStructure(this.basicCompanyInfo)),2==this.generalProcess&&(this.CompStructureObject.name=this.basicCompanyInfo.name,this.CompStructureObject.subLevelTitle=this.compStructureTitles[this.companyLevel+1],this.companyMaxLevel=Number(this.basicCompanyInfo.levels),this.generateNextProcessForm())}ngOnDestroy(){this.newCompany$.unsubscribe()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.Y36(x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-new-company"]],decls:5,vars:4,consts:[[1,"container"],[4,"ngIf"],[3,"fromModel","getFormValue","onSubmit"],[1,"button"],[3,"text","newEvent"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,S,2,1,"ng-container",1),t.YNc(2,A,2,1,"ng-container",1),t.YNc(3,E,4,2,"ng-container",1),t.YNc(4,$,2,1,"ng-container",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",a.generalProcess<2),t.xp6(1),t.Q6J("ngIf",1==a.generalProcess),t.xp6(1),t.Q6J("ngIf",2==a.generalProcess),t.xp6(1),t.Q6J("ngIf",3==a.generalProcess))},dependencies:[g.O5,N.r,F.r],styles:[".container[_ngcontent-%COMP%]{width:100%}.button[_ngcontent-%COMP%]{text-align:center;margin:1em auto}"]}),s})();var v=u(4578),I=u(2488);let J=(()=>{var o;class s{constructor(e){this.router=e}createNew(){this.router.navigate(["admin/new"])}}return(o=s).\u0275fac=function(e){return new(e||o)(t.Y36(b.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-admin"]],decls:6,vars:1,consts:[[1,"container"],[1,"sub-container"],[1,"admin-menu"],[3,"text","newEvent"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-aside"),t.TgZ(2,"div",1)(3,"div",2)(4,"app-button",3),t.NdJ("newEvent",function(){return a.createNew()}),t.qZA()(),t._UZ(5,"router-outlet"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("text","New Company"))},dependencies:[b.lC,N.r,I.l],styles:[".container[_ngcontent-%COMP%]{display:flex}.sub-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.admin-menu[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2em;padding:1em 3em}app-aside[_ngcontent-%COMP%]{flex:0 0 22em}"]}),s})();var p=u(1391);const Z=[{path:"",component:J,children:[{path:"dashboard",component:v.M,canActivate:[p.p]},{path:"dashboard/:leveOne",component:v.M,canActivate:[p.p]},{path:"dashboard/:leveOne/:levelTwo",component:v.M,canActivate:[p.p]},{path:"dashboard/:leveOne/:levelTwo/:levelThree",component:v.M,canActivate:[p.p]},{path:"dashboard/:leveOne/:levelTwo/:levelThree/:levelFour",component:v.M,canActivate:[p.p]},{path:"dashboard/:leveOne/:levelTwo/:levelThree/:levelFour/:levelFive",component:v.M,canActivate:[p.p]},{path:"new",component:O,pathMatch:"full",canActivate:[p.p]}],canActivate:[p.p]}];let B=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[b.Bz.forChild(Z),b.Bz]}),s})();var q=u(6208),H=u(6354);let Q=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[x],imports:[g.ez,B,q.m,H.CompanyModule]}),s})()}}]);